# Utiliser une image de base pour Go
FROM golang:1.22-alpine

# Définir le répertoire de travail dans le conteneur
WORKDIR /app

# Copier les fichiers go.mod et go.sum
COPY go.mod go.sum ./

# Télécharger les dépendances
RUN go mod download

# Copier le reste des fichiers de l'application, en excluant les dossiers non nécessaires
COPY . .

# Supprimer les dossiers non nécessaires
RUN rm -rf dashboard documentation-scanner

# Construire l'application
RUN go build -o main .

# Exposer le port sur lequel l'application va tourner
EXPOSE 8082

# Démarrer l'application
CMD ["./main"]
