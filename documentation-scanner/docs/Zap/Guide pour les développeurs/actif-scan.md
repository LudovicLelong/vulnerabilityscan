---
sidebar_position: 4
title: "Lancer un scan actif"
---

## Le code besoin dans le main pour lancer l'analyse
```
package main

import (
	"fmt"
	"time"
	"vulnerabilityscan/zap-active-scan"
)

func main() {
	zap := active_scan.NewZAPv2()

	fmt.Println("Stopping any previous scans...")
	if err := zap.StopScan(); err != nil {
		fmt.Printf("Erreur lors de l'arrêt des scans précédents: %v\n", err)
		return
	}

	fmt.Println("Starting active scan...")

	// Démarrer le scan actif
	scanID, err := zap.ActiveScan(active_scan.Target)
	if err != nil {
		fmt.Printf("Erreur lors du démarrage du scan actif: %v\n", err)
		return
	}

	fmt.Printf("Scan démarré avec l'ID: %s\n", scanID)

	// Attendre la fin du scan
	for {
		progress, err := zap.ScanStatus(scanID)
		if err != nil {
			fmt.Printf("Erreur lors de la vérification du statut du scan: %v\n", err)
			return
		}

		fmt.Printf("Scan ID: %s, Progress: %s%%\n", scanID, progress)

		if progress == "100" {
			break
		}

		time.Sleep(5 * time.Second) // Attendre 5 secondes avant de vérifier à nouveau
	}

	fmt.Println("Scan terminé")

	// Récupérer les résultats du scan
	results, err := zap.ScanResults(active_scan.Target)
	if err != nil {
		fmt.Printf("Erreur lors de la récupération des résultats: %v\n", err)
		return
	}

	// Afficher les résultats
	fmt.Println("Résultats du scan actif:")
	for _, alert := range results {
		fmt.Printf("URL: %s, Risque: %s, Description: %s\n", alert.URL, alert.Risk, alert.Description)
	}
}

```




Pour que ca marche il faut changer dans . > zap-active-scan > zap :
![Zap constante à changer dont API, notre port, et le site qu'on veut attaquer](./img/zap-apikeuy-ajax-spider.png)

On obtient le résultat suivant :
![Le résultat scan actif zap](./img/zap%20-actif-scan-result.png)
On obtient notamment la catégorie de dangerosité de la vulnérabilité (exemple : high-priority, medium-priority, low-priority and informational priority risks).

